# Tmux Configuration for Ghostty
# Generated by Claude Code

# ========================================
# プレフィックスキー設定（Ctrl+B: デフォルト）
# ========================================
set -g prefix C-b
bind C-b send-prefix

# ========================================
# ターミナル設定（ghostty最適化）
# ========================================
# 256色+True Color対応
set -g default-terminal "xterm-ghostty"
set -ag terminal-overrides ",xterm-ghostty:Tc"

# extended-keys（ghostty連携用）
set -s extended-keys on
set -as terminal-features 'xterm-ghostty:extkeys'

# ========================================
# 基本設定
# ========================================
# マウス有効化
set -g mouse on

# インデックス開始番号
set -g base-index 1
setw -g pane-base-index 1

# ウィンドウ番号自動振り直し
set -g renumber-windows on

# エスケープ時間短縮
set -sg escape-time 0

# ヒストリサイズ
set -g history-limit 50000

# ========================================
# コピーモード設定（vi風）
# ========================================
setw -g mode-keys vi
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"

# ========================================
# ペイン操作
# ========================================
# ペイン分割（現在のパスを維持）
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# ペイン移動 (vim風)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ペインリサイズ
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ========================================
# 外観設定（tokyonight風）
# ========================================
# ステータスバー
set -g status-position top
set -g status-style 'bg=#1a1b26 fg=#a9b1d6'
set -g status-left-length 50
set -g status-right-length 50
set -g status-left '#[fg=#7aa2f7,bold] #S '
set -g status-right '#[fg=#a9b1d6] %Y-%m-%d %H:%M '

# ウィンドウステータス
setw -g window-status-format '#[fg=#565f89] #I:#W '
setw -g window-status-current-format '#[fg=#7aa2f7,bold] #I:#W '

# ペインボーダー
set -g pane-border-style 'fg=#565f89'
set -g pane-active-border-style 'fg=#7aa2f7'

# ========================================
# Claude Code連携設定
# ========================================
set -g allow-passthrough on  # 外部制御許可
set -g set-clipboard on      # OSC 52クリップボード連携

# ========================================
# 便利なキーバインド
# ========================================
# 設定リロード
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# 新規ウィンドウ（現在のパスを維持）
bind c new-window -c "#{pane_current_path}"

# ========================================
# VSCode風レイアウト
# ========================================
# Prefix + V → VSCode風4ペインレイアウトを再構築
bind V run-shell "~/.config/ghostty/vscode-layout.sh"
